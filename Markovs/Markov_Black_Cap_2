define variable key_voice_one = {78 78 79 79 78 81 75 80 81 81 74 74 75 76 77 77 59 69 96 61 96 97 97 78 66 66 65 65 64 64 63 63 68 65 66 95 86 79 80 80 75 75 77 77 87 87 86 76 76 75 71 70 70 76 77 77 78 78 79 80 80 81 81 86 85 73 74 75 76 76 75 75 82 78 77 81 84 84 91 81 87 74 72 73 74 77 78 78 77 77 74 73 74 77 77 78 79 71 83 70 71 77 77 78 78 75 77 78 77 76 80 71 70 70 77 78 79 79 79 86 89 81 80 80 79 79 82 67 68 81 78 78 78 79 79 79 77 95 94 94 82 92 100 100 80 59 83 84 51 79 76 75 75 87 87 88 85 85 82 82 74 73 79 79 77 89 89 84 86 87 82 81 78 78 77 76 76 75 75 75 84 82 81 80 80 79 79 78 78 78 77 76 76 76 73 73 84 84 82 81 81 81 81 82 82 84 85 86 85 85 77 77 77 78 78 78 86 77 77 76 64 79 79 80 80 81 81 82 82 83 83 84 93 93 94 64 80 80 74 60 60 57 81 74 74 85 85 71 71 70 70 69 69 68 68 67 67 96 72 70 70 69 69 68 68 67 67 73 72 70 70 69 69 68 68 67 80 81 81 86 74 74 84 84 82 68 97 68 74 69 79 79 79 79 100 80 80 79 79 78 78 77 88 92 91 86 92 92 91 86 84 92 91 73 74 74 75 76 76 76 79 79 80 80 81 82 83 84 84 84 95 83 89 90 90 54 54 90 54 92 86 79 77 78 77 76 75 74 73 73 72 72 73 73 77 79 79 79 79 74 74 77 84 84 85 81 81 81 75 77 77 78 78 79 79 79 85 85 92 79 78 78 77 77 80 75 78 78 79 79 79 78 78 88 88 87 87 83 82 79 78 78 79 79 85 85 80 80 81 81 77 77 76 76 74 73 73 73 74 74 87 74 87 88 96 95 95 88 83 82 81 81 70 70 71 71 72 66 66 90 92 91 90 90 86 93 93 87 74 76 76 75 75 76 75 75 48 49 50 79 56 57 83 83 85 74 74 77 65 65 77 80 81 81 81 78 75 70 73 92 96 95 95 77 78 78 79 79 80 80 89 89 88 87 85 87 88 87 87 51 77 77 81 76 75 74 74 75 76 76 77 77 78 79 79 80 80 75 86 76 86 76 75 75 74 74 75 75 77 77 86 86 84 84 85 78 77 78 75 74 73 72 71 72 73 79 79 78 79 74 96 72 91 92 90 88 77 76 76 81 94 94 76 76 62 88 84 88 88 82 84 73 72 79 78 78 77 77 77 90 85 86 87 82 81 78 77 77 76 76 75 75 85 84 81 81 80 79 79 78 77 77 77 76 76 76 74 73 89 84 81 81 81 81 82 82 83 84 85 86 85 85 85 80 79 65 65 66 84 76 76 68 69 77 77 76 83 84 88 89 88 94 94 77 89 77 75 73 70 73 88 88 88 88 94 78 77 77 77 78 78 77 77 76 76 77 76 75 77 77 77 75 75 74 74 73}


define variable rate_voice_one = {0.04 0.24 0.04 0.24 0.28 0.28 0.28 0.38 0.19 0.19 0.02 0.51 0.53 0.53 0.02 0.19 0.58 0.58 0.24 0.58 0.34 0.06 0.81 0.55 0.06 0.49 0.03 0.52 0.03 0.35 0.02 0.32 0.34 0.30 0.30 0.16 0.29 0.29 0.05 0.24 0.09 0.31 0.02 0.15 0.04 0.19 0.23 0.04 0.43 0.52 0.52 0.02 0.21 0.31 0.03 0.28 0.08 0.23 0.34 0.06 0.29 0.10 0.17 0.52 0.52 0.69 0.17 0.17 0.15 0.03 0.07 0.28 0.48 0.32 0.32 0.29 0.04 0.33 0.19 0.39 0.40 0.49 0.54 0.54 0.05 0.17 0.02 0.58 0.04 0.39 0.55 0.27 0.27 0.04 0.33 0.36 0.37 0.27 0.27 0.29 0.30 0.02 0.29 0.06 0.25 0.28 0.08 0.84 0.84 0.60 0.16 0.48 0.03 0.46 0.48 0.48 0.03 0.07 0.39 0.45 0.45 0.40 0.03 0.16 0.02 0.14 0.35 0.34 0.35 0.40 0.02 0.02 0.02 0.06 0.02 0.04 0.07 0.72 0.02 0.69 0.72 0.32 0.14 0.19 0.15 0.15 0.15 0.15 0.15 0.36 0.36 0.03 0.20 0.04 0.39 0.43 0.06 0.55 0.20 0.20 0.06 0.06 0.04 0.23 0.28 0.03 0.37 0.29 0.29 0.29 0.35 0.35 0.06 0.23 0.22 0.03 0.20 0.04 0.06 0.14 0.37 0.37 0.36 0.04 0.33 0.02 0.34 0.02 0.05 0.31 0.38 0.03 0.08 0.32 0.03 0.42 0.05 0.23 0.28 0.09 0.07 0.11 0.03 0.13 0.44 0.56 0.30 0.49 0.03 0.23 0.03 0.16 0.32 0.12 0.11 0.05 1.32 0.03 0.21 0.24 0.19 0.07 0.01 0.07 0.01 0.03 0.32 0.09 0.26 0.05 0.31 0.30 0.02 0.52 0.54 0.18 0.13 0.43 0.57 0.05 1.23 0.17 0.28 0.03 0.28 0.57 0.15 0.04 0.25 0.03 0.40 0.02 0.41 0.06 0.38 0.06 0.38 0.48 0.16 0.05 0.11 0.06 0.10 0.06 0.10 0.02 0.14 0.88 0.11 0.04 0.07 0.06 0.06 0.05 0.06 0.11 0.14 0.07 0.07 0.27 0.03 0.24 0.02 0.24 0.27 0.14 0.28 0.28 0.30 0.30 0.02 0.03 0.06 0.03 0.16 0.10 0.25 0.03 0.33 0.03 0.33 0.35 0.59 0.61 0.61 0.42 0.14 0.20 0.20 0.27 0.27 0.44 0.44 0.61 0.02 0.59 0.60 0.09 0.04 0.48 0.06 0.23 0.03 0.19 0.19 0.19 0.19 0.11 0.12 0.01 0.69 0.15 0.15 0.02 0.23 0.02 0.24 0.22 0.29 0.21 0.33 0.91 0.10 0.91 0.81 0.24 0.07 0.07 0.07 0.07 0.06 0.01 0.06 0.52 0.56 0.17 0.05 0.05 0.24 0.05 0.06 0.56 0.04 0.45 0.48 0.08 0.10 0.02 0.34 0.04 0.19 0.05 0.18 0.10 0.08 0.05 0.09 0.13 0.20 0.31 0.05 0.27 0.11 0.19 0.44 0.10 0.08 0.26 0.08 0.11 0.14 0.04 0.26 0.02 0.99 0.02 0.99 1.02 1.01 0.28 0.09 0.06 0.06 0.06 0.10 0.19 0.03 0.32 0.27 0.09 0.09 0.34 0.14 0.30 0.43 0.34 0.03 0.10 0.05 0.22 0.54 1.02 0.47 0.61 0.61 0.04 0.45 0.38 0.38 0.38 0.02 0.21 0.03 0.17 0.07 0.38 0.45 0.04 0.41 0.27 0.06 0.06 0.06 0.06 0.18 0.06 0.13 0.82 0.82 0.02 0.59 0.11 0.50 0.64 0.03 0.04 0.11 0.46 0.46 0.46 0.46 0.18 0.02 0.16 0.21 0.02 0.53 0.23 0.06 0.18 0.19 0.22 0.10 0.08 0.03 0.47 0.23 0.11 0.11 0.25 0.24 0.02 0.22 0.40 0.02 0.38 0.08 0.32 0.28 0.13 0.06 0.56 0.55 0.55 0.56 0.16 0.15 0.13 0.02 0.60 0.34 0.21 0.54 0.28 0.23 0.03 0.52 0.31 0.02 0.24 0.04 0.36 0.40 0.13 0.27 0.03 0.38 0.59 0.47 0.50 0.11 0.56 0.02 0.28 0.21 0.34 0.03 0.23 0.02 0.44 0.03 0.11 0.14 0.13 0.44 0.11 0.42 0.30 0.27 0.27 0.27 0.26 0.27 0.56 0.56 0.20 0.21 0.53 0.13 0.06 0.26 1.02 0.15 0.15 0.57 0.56 0.56 0.04 0.52 0.56 0.16 0.40 0.13 0.02 0.33 0.45 0.15 0.30 0.58 0.14 0.14 0.38 0.38 0.48 0.03 0.45 0.06 0.04 0.38 0.40 0.29 0.29 0.29 0.35 0.35 0.35 0.05 0.17 0.03 0.18 0.02 0.19 0.21 0.39 0.07 0.32 0.39 0.02 0.37 0.38 0.08 0.06 0.24 0.03 0.09 0.30 0.43 0.42 0.68 0.28 0.07 0.21 0.02 0.15 0.04 0.53 0.56 0.56 0.30 0.19 0.03 0.09 0.07 0.56 0.55 0.03 0.53 0.56 0.43 0.08 0.20 0.95 0.21 0.06 0.06 0.06 0.65 0.65 0.65 0.93 0.93 0.38 0.56 0.56 0.55 1.16 0.74 0.74 0.74 2.36 0.08 0.34 0.03 0.38 0.47 0.37 0.10 0.16 0.36 0.11 0.26 0.02 0.09 0.04 0.15 0.05 0.07 0.23 0.17 0.07 0.62 0.04 0.50 0.22 0.50 0.50}


define process playtune (reps, pat, rate)
  run repeat reps
    for n = next(pat)
    for r = next(rate)
    if r < 0.1 then set r = next(rate)
    if n > 0 then send "mp:midi", key: n, dur: r
    wait r
  end

define variable markov_key_voice_one = markov-analyze(key_voice_one, order: 2, mode: 2)
define variable markov_rate_voice_one = markov-analyze(rate_voice_one, order: 1, mode: 2)


sprout list (
playtune(500, markov_key_voice_one, markov_rate_voice_one),
playtune(500, markov_key_voice_one, markov_rate_voice_one)
), "Black_Cap4.mid"